<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>

    <script>

    function downloadFW()
    {
        var e = document.getElementById('versionsSelect');
        var DLurl = "http://speeduino.com/fw/bin/" + e.options[e.selectedIndex].value + ".hex";
        console.log(DLurl);
        
        const ipcRenderer = electron.ipcRenderer
        ipcRenderer.send("download", {
            url: DLurl,
            properties: {directory: "downloads"}
        });
        
    }
    </script>
  </head>
  <body>
    <h1>Speeduino firmware loader</h1>

    <form>
        <select name="firmwares" id="versionsSelect" size="10">
          </select>

        <input type='button' onclick="downloadFW();" />
    </form>

    <script>document.write(app.getPath('downloads'));</script>

    <script>
    var request = require('request');
    request.get('http://speeduino.com/fw/versions', function (error, response, body) {
        if (!error && response.statusCode == 200) {

            var lines = body.split('\n');
            // Continue with your processing here.
            select = document.getElementById('versionsSelect');
            for(var i = 0;i < lines.length;i++)
            {
                var newOption = document.createElement('option');
                newOption.value = lines[i];
                newOption.innerHTML = lines[i];
                select.appendChild(newOption);
            }
            select.selectedIndex = 0;
        }
    });
</script>
avrdude -v -p atmega328p -C C:\somepath\avrdude.conf -c stk500v2 -Pusb -b 115200 -P "usb" -D -U flash:w:.pioenvs\uno_prog\firmware.hex:i
  </body>
</html>